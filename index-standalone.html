<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <title>India AI Summit 2026</title>
    <style>
        /* CSS Variables for theming */
        :root {
            --bg-primary: #FFFFFF;
            --bg-secondary: #F5F5F7;
            --bg-tertiary: #E8E8ED;
            --text-primary: #1D1D1F;
            --text-secondary: #86868B;
            --accent: #007AFF;
            --accent-hover: #0051D5;
            --border: #D2D2D7;
            --card-bg: #FFFFFF;
            --header-bg: rgba(255, 255, 255, 0.8);
            --bookmark-color: #FF9500;
            --font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
        }

        [data-theme="dark"] {
            --bg-primary: #000000;
            --bg-secondary: #1C1C1E;
            --bg-tertiary: #2C2C2E;
            --text-primary: #FFFFFF;
            --text-secondary: #98989D;
            --accent: #0A84FF;
            --accent-hover: #409CFF;
            --border: #38383A;
            --card-bg: #1C1C1E;
            --header-bg: rgba(28, 28, 30, 0.8);
            --bookmark-color: #FF9F0A;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-family);
            background: var(--bg-secondary);
            color: var(--text-primary);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            transition: background-color 200ms ease, color 200ms ease;
        }

        .summit-page {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* Header */
        .summit-header {
            position: relative;
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1.5rem;
            padding: 1rem 2rem;
            background: var(--card-bg);
            border-bottom: 1px solid var(--border);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 2rem;
            flex: 1;
            min-width: 0;
        }

        .summit-header h1 {
            font-size: 1.5rem;
            font-weight: 600;
            white-space: nowrap;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex-shrink: 0;
        }

        /* Theme Toggle */
        .theme-toggle {
            width: 2.5rem;
            height: 2.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg-tertiary);
            border: none;
            border-radius: 50%;
            cursor: pointer;
            transition: all 150ms ease;
            font-size: 1.25rem;
        }

        .theme-toggle:hover {
            transform: scale(1.1);
            background: var(--border);
        }

        /* Day Tabs */
        .day-tabs {
            display: flex;
            gap: 0.25rem;
            background: var(--bg-tertiary);
            padding: 0.25rem;
            border-radius: 12px;
            overflow-x: auto;
            scrollbar-width: none;
        }

        .day-tabs::-webkit-scrollbar {
            display: none;
        }

        .day-tabs .tab {
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--text-primary);
            background: transparent;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 150ms ease;
            white-space: nowrap;
            flex-shrink: 0;
        }

        .day-tabs .tab:hover {
            background: var(--border);
        }

        .day-tabs .tab.active {
            background: var(--card-bg);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .day-tabs .count {
            margin-left: 0.25rem;
            font-size: 0.8125rem;
            color: var(--text-secondary);
        }

        /* Filters */
        .filters {
            display: flex;
            gap: 0.75rem;
            align-items: center;
        }

        .filter-select {
            padding: 0.5rem 0.75rem;
            font-size: 0.875rem;
            font-family: var(--font-family);
            color: var(--text-primary);
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 8px;
            cursor: pointer;
            transition: all 150ms ease;
        }

        .filter-select:hover {
            background: var(--border);
        }

        /* Search */
        .search-container {
            position: relative;
            width: 280px;
        }

        .search-input {
            width: 100%;
            padding: 0.625rem 2.5rem 0.625rem 1rem;
            font-size: 0.9375rem;
            font-family: var(--font-family);
            border: 1px solid var(--border);
            border-radius: 10px;
            background: var(--card-bg);
            color: var(--text-primary);
            transition: all 150ms ease;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--accent);
        }

        .clear-btn {
            position: absolute;
            right: 0.5rem;
            top: 50%;
            transform: translateY(-50%);
            width: 1.5rem;
            height: 1.5rem;
            display: none;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            color: var(--text-secondary);
            background: transparent;
            border: none;
            cursor: pointer;
        }

        .clear-btn.visible {
            display: flex;
        }

        /* Content */
        .schedule-content {
            flex: 1;
            overflow-y: auto;
            padding: 2rem;
        }

        .time-slot {
            margin-bottom: 2.5rem;
        }

        .slot-time {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: 1rem;
            padding-left: 0.5rem;
        }

        .session-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(360px, 1fr));
            gap: 1rem;
        }

        /* Session Card */
        .session-card {
            position: relative;
            padding: 1.25rem;
            background: var(--card-bg);
            border-radius: 12px;
            border: 1px solid var(--border);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
            transition: all 200ms ease;
            cursor: pointer;
        }

        .session-card:hover {
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
            transform: translateY(-2px);
            border-color: var(--accent);
        }

        .session-card.bookmarked {
            border-color: var(--bookmark-color);
        }

        .bookmark-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            width: 2rem;
            height: 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            background: transparent;
            border: none;
            cursor: pointer;
            transition: transform 150ms ease;
        }

        .bookmark-btn:hover {
            transform: scale(1.2);
        }

        .bookmark-btn.bookmarked {
            color: var(--bookmark-color);
        }

        .session-title {
            font-size: 1.0625rem;
            font-weight: 600;
            line-height: 1.4;
            margin-bottom: 0.75rem;
            padding-right: 2rem;
        }

        .session-location {
            font-size: 0.8125rem;
            color: var(--text-secondary);
            margin-bottom: 0.75rem;
        }

        .session-speakers {
            font-size: 0.875rem;
            margin-bottom: 0.75rem;
        }

        .session-keywords {
            display: flex;
            flex-wrap: wrap;
            gap: 0.375rem;
            margin-top: 0.5rem;
        }

        .keyword-tag {
            display: inline-block;
            padding: 0.25rem 0.625rem;
            font-size: 0.75rem;
            background: var(--bg-secondary);
            color: var(--text-secondary);
            border-radius: 4px;
            border: 1px solid var(--border);
        }

        .empty-state {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 4rem 2rem;
            text-align: center;
            color: var(--text-secondary);
            font-size: 1.125rem;
        }

        .loading {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            gap: 1rem;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .summit-header {
                flex-direction: column;
                align-items: stretch;
                gap: 0.75rem;
                padding: 0.75rem;
            }

            .header-left {
                flex-direction: column;
                gap: 0.75rem;
            }

            .summit-header h1 {
                font-size: 1.125rem;
                text-align: center;
            }

            .header-right {
                width: 100%;
                flex-direction: column;
                gap: 0.75rem;
            }

            /* Compact date tabs for mobile */
            .day-tabs {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: 0.5rem;
                padding: 0;
                background: transparent;
            }

            .day-tabs .tab {
                padding: 0.625rem 0.5rem;
                font-size: 0.75rem;
                font-weight: 600;
                text-align: center;
                border-radius: 8px;
                background: var(--bg-tertiary);
                border: 1px solid var(--border);
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 0.125rem;
            }

            .day-tabs .tab.active {
                background: var(--accent);
                color: white;
                border-color: var(--accent);
            }

            .day-tabs .count {
                margin-left: 0;
                font-size: 0.6875rem;
                opacity: 0.8;
            }

            /* Filters in single row on mobile */
            .filters {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: 0.375rem;
                width: 100%;
            }

            .filter-select {
                width: 100%;
                font-size: 0.75rem;
                padding: 0.5rem 0.375rem;
            }

            .search-container {
                width: 100%;
                max-width: 100%;
                order: -1;
                /* Move search above filters */
            }

            .theme-toggle {
                position: absolute;
                top: 0.75rem;
                right: 0.75rem;
                width: 2rem;
                height: 2rem;
                font-size: 1rem;
            }

            .schedule-content {
                padding: 0.75rem;
            }

            .session-grid {
                grid-template-columns: 1fr;
            }

            .modal-content {
                width: 95%;
                max-width: 95%;
                margin: 1rem;
                max-height: 90vh;
            }

            .slot-time {
                font-size: 0.9375rem;
            }

            .session-card {
                padding: 1rem;
            }

            .session-title {
                font-size: 1rem;
            }
        }

        /* Modal Styles */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(8px);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            animation: fadeIn 200ms ease;
        }

        .modal-overlay.visible {
            display: flex;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        .modal-content {
            position: relative;
            background: var(--card-bg);
            border-radius: 16px;
            width: 90%;
            max-width: 700px;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: slideUp 300ms ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            position: sticky;
            top: 0;
            background: var(--card-bg);
            padding: 1.5rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            gap: 1rem;
            z-index: 10;
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 600;
            line-height: 1.3;
            flex: 1;
        }

        .modal-close {
            width: 2rem;
            height: 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg-tertiary);
            border: none;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.5rem;
            color: var(--text-secondary);
            transition: all 150ms ease;
            flex-shrink: 0;
        }

        .modal-close:hover {
            background: var(--border);
            transform: scale(1.1);
        }

        .modal-body {
            padding: 1.5rem;
        }

        .modal-section {
            margin-bottom: 1.5rem;
        }

        .modal-section:last-child {
            margin-bottom: 0;
        }

        .modal-section-title {
            font-size: 0.875rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-secondary);
            margin-bottom: 0.75rem;
        }

        .modal-time {
            font-size: 1.125rem;
            font-weight: 500;
            color: var(--accent);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .modal-location {
            font-size: 1rem;
            color: var(--text-primary);
            display: flex;
            align-items: flex-start;
            gap: 0.5rem;
            line-height: 1.5;
        }

        .speaker-list {
            list-style: none;
        }

        .speaker-item {
            padding: 0.75rem;
            margin-bottom: 0.5rem;
            background: var(--bg-secondary);
            border-radius: 8px;
            border-left: 3px solid var(--accent);
        }

        .speaker-name {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .speaker-affiliation {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .modal-description {
            font-size: 1rem;
            line-height: 1.7;
            color: var(--text-primary);
        }

        .knowledge-partners {
            font-size: 0.9375rem;
            padding: 0.75rem;
            background: var(--bg-secondary);
            border-radius: 8px;
            color: var(--text-primary);
        }
    </style>
</head>

<body>
    <div id="app">
        <div class="loading">
            <h1>India AI Summit 2026</h1>
            <p>Loading schedule...</p>
        </div>
    </div>

    <script>
        // State
        let sessions = [];
        let activeDay = '16th Feb';
        let searchQuery = '';
        let timeFilter = 'all';
        let locationFilter = 'all';
        let keywordFilter = 'all';
        let bookmarkedIds = new Set();
        let theme = 'light';

        // Extract keywords based on industry/sector/technology
        function extractKeywords(description, title, speakers = []) {
            if (!description && !title) return [];

            const text = `${title || ''} ${description || ''} ${speakers.join(' ')}`.toLowerCase();

            // Define keyword categories by domain/industry/technology
            const keywordMap = {
                // Core AI Technologies
                'AI Agents': ['agent', 'agentic', 'autonomous', 'multi-agent', 'llm agent'],
                'Machine Learning': ['machine learning', 'ml model', 'deep learning', 'neural network', 'training', 'inference'],
                'Natural Language': ['nlp', 'language model', 'llm', 'translation', 'multilingual', 'speech', 'voice', 'bhashini'],
                'Computer Vision': ['computer vision', 'image', 'video', 'visual', 'recognition', 'detection'],
                'Generative AI': ['generative', 'gen ai', 'chatgpt', 'gpt', 'synthetic', 'content generation'],

                // Industry Sectors
                'Healthcare': ['health', 'medical', 'hospital', 'clinical', 'patient', 'diagnosis', 'disease', 'pharma', 'medicine'],
                'Education': ['education', 'learning', 'student', 'university', 'school', 'teaching', 'curriculum', 'skill'],
                'Agriculture': ['agricult', 'farm', 'crop', 'soil', 'rural', 'food security', 'agritech'],
                'Finance': ['financ', 'banking', 'payment', 'credit', 'investment', 'fintech', 'trading'],
                'Manufacturing': ['manufactur', 'industry', 'factory', 'production', 'supply chain', 'logistics'],
                'Transportation': ['transport', 'mobility', 'vehicle', 'road', 'traffic', 'automotive'],

                // Cross-cutting Themes
                'Governance': ['governance', 'policy', 'regulat', 'government', 'public sector', 'civic', 'compliance'],
                'Ethics & Safety': ['ethic', 'responsible', 'safety', 'trust', 'fairness', 'bias', 'transparency', 'accountability'],
                'Data & Privacy': ['data', 'privacy', 'security', 'protection', 'gdpr', 'personal data'],
                'Infrastructure': ['infrastructure', 'compute', 'cloud', 'data center', 'hardware', 'chip', 'gpu'],
                'Research': ['research', 'academic', 'university', 'lab', 'scientist', 'publication', 'innovation'],

                // Application Areas
                'Climate & Sustainability': ['climate', 'sustainability', 'environment', 'carbon', 'energy', 'green', 'circular'],
                'Social Impact': ['inclusion', 'equity', 'accessibility', 'disability', 'rural', 'underserved', 'empowerment'],
                'Digital Public Goods': ['dpi', 'digital public', 'open source', 'commons', 'public infrastructure'],
                'Skilling & Workforce': ['skill', 'workforce', 'employment', 'job', 'talent', 'training', 'upskill', 'reskill'],

                // Emerging Areas
                'Startups & Innovation': ['startup', 'entrepreneur', 'venture', 'innovation', 'ecosystem'],
                'Global South': ['global south', 'developing', 'emerging market', 'africa', 'asia', 'south-south']
            };

            const matched = [];
            for (const [keyword, patterns] of Object.entries(keywordMap)) {
                for (const pattern of patterns) {
                    if (text.includes(pattern)) {
                        matched.push(keyword);
                        break; // Only add once per keyword category
                    }
                }
            }

            // Return up to 5 most relevant keywords
            return matched.slice(0, 5);
        }

        // Load theme from localStorage
        function loadTheme() {
            theme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', theme);
        }

        // Toggle theme
        function toggleTheme() {
            theme = theme === 'light' ? 'dark' : 'light';
            localStorage.setItem('theme', theme);
            document.documentElement.setAttribute('data-theme', theme);
            render();
        }

        // Load bookmarks from localStorage
        function loadBookmarks() {
            const saved = localStorage.getItem('bookmarkedSessions');
            if (saved) {
                bookmarkedIds = new Set(JSON.parse(saved));
            }
        }

        // Toggle bookmark
        function toggleBookmark(id) {
            if (bookmarkedIds.has(id)) {
                bookmarkedIds.delete(id);
            } else {
                bookmarkedIds.add(id);
            }
            localStorage.setItem('bookmarkedSessions', JSON.stringify([...bookmarkedIds]));
            render();
        }

        // Get time category
        function getTimeCategory(timeStr) {
            const match = timeStr.match(/(\d{1,2}):(\d{2})\s*([AP]M)/i);
            if (!match) return 'other';

            let hour = parseInt(match[1]);
            const period = match[3].toUpperCase();

            if (period === 'PM' && hour !== 12) hour += 12;
            if (period === 'AM' && hour === 12) hour = 0;

            if (hour >= 6 && hour < 12) return 'morning';
            if (hour >= 12 && hour < 17) return 'afternoon';
            if (hour >= 17 && hour < 22) return 'evening';
            return 'other';
        }

        // Parse sessions data
        function parseSessions(data) {
            return data.map(s => ({
                ...s,
                start: s.time.match(/(\d{1,2}:\d{2}\s*[AP]M)/i)?.[1] || 'TBD',
                end: s.time.match(/-\s*(\d{1,2}:\d{2}\s*[AP]M)/i)?.[1] || s.time.match(/(\d{1,2}:\d{2}\s*[AP]M)/i)?.[1] || 'TBD',
                keywords: extractKeywords(s.description, s.title, s.speakers)
            }));
        }

        // Get filtered sessions
        function getFilteredSessions() {
            const sessionsByDay = {};
            sessions.forEach(s => {
                if (!sessionsByDay[s.date]) sessionsByDay[s.date] = [];
                sessionsByDay[s.date].push(s);
            });

            let daySessions = sessionsByDay[activeDay] || [];

            // Apply time filter
            if (timeFilter !== 'all') {
                daySessions = daySessions.filter(s => getTimeCategory(s.start) === timeFilter);
            }

            // Apply location filter
            if (locationFilter !== 'all') {
                daySessions = daySessions.filter(s => s.location.startsWith(locationFilter));
            }

            // Apply keyword filter
            if (keywordFilter !== 'all') {
                daySessions = daySessions.filter(s =>
                    s.keywords && s.keywords.some(k => k.toLowerCase() === keywordFilter.toLowerCase())
                );
            }

            // Apply search
            if (searchQuery.trim()) {
                const q = searchQuery.toLowerCase();
                daySessions = daySessions.filter(s =>
                    (s.title + s.description + s.speakers.join(' ') + s.location).toLowerCase().includes(q)
                );
            }

            return daySessions;
        }

        // Group sessions by time slot
        function groupByTimeSlot(sessions) {
            const grouped = {};
            sessions.forEach(s => {
                const slot = `${s.start} ‚Äì ${s.end}`;
                if (!grouped[slot]) grouped[slot] = [];
                grouped[slot].push(s);
            });

            return Object.entries(grouped).sort((a, b) => {
                const timeA = a[0].match(/(\d{1,2}):(\d{2})/);
                const timeB = b[0].match(/(\d{1,2}):(\d{2})/);
                if (!timeA || !timeB) return 0;
                const hourA = parseInt(timeA[1]) + (a[0].includes('PM') && timeA[1] !== '12' ? 12 : 0);
                const hourB = parseInt(timeB[1]) + (b[0].includes('PM') && timeB[1] !== '12' ? 12 : 0);
                return hourA !== hourB ? hourA - hourB : parseInt(timeA[2]) - parseInt(timeB[2]);
            });
        }

        // Get unique keywords
        function getUniqueKeywords() {
            const keywords = new Set();
            sessions.forEach(s => {
                if (s.keywords) {
                    s.keywords.forEach(k => keywords.add(k));
                }
            });
            return Array.from(keywords).sort();
        }

        // Get unique venues
        function getUniqueVenues() {
            const venues = new Set();
            sessions.forEach(s => {
                const venue = s.location.split(' - ')[0];
                if (venue) venues.add(venue);
            });
            return Array.from(venues).sort();
        }

        // Get all dates
        function getAllDates() {
            const sessionsByDay = {};
            sessions.forEach(s => {
                if (!sessionsByDay[s.date]) sessionsByDay[s.date] = [];
                sessionsByDay[s.date].push(s);
            });
            return Object.keys(sessionsByDay).sort((a, b) => {
                const dayA = parseInt(a.match(/\d+/)?.[0] || '0');
                const dayB = parseInt(b.match(/\d+/)?.[0] || '0');
                return dayA - dayB;
            });
        }

        // Render app
        function render() {
            const app = document.getElementById('app');
            const filteredSessions = getFilteredSessions();
            const slotGroups = groupByTimeSlot(filteredSessions);
            const allDates = getAllDates();
            const allVenues = getUniqueVenues();
            const allKeywords = getUniqueKeywords();

            const sessionsByDay = {};
            sessions.forEach(s => {
                if (!sessionsByDay[s.date]) sessionsByDay[s.date] = [];
                sessionsByDay[s.date].push(s);
            });

            app.innerHTML = `
                <div class="summit-page">
                    <header class="summit-header">
                        <div class="header-left">
                            <h1>India AI Summit 2026</h1>
                            <nav class="day-tabs">
                                ${allDates.map(date => `
                                    <button class="tab ${activeDay === date ? 'active' : ''}" onclick="setActiveDay('${date}')">
                                        ${date}
                                        <span class="count">(${sessionsByDay[date]?.length || 0})</span>
                                    </button>
                                `).join('')}
                            </nav>
                        </div>
                        <div class="header-right">
                            <div class="filters">
                                <select class="filter-select" value="${timeFilter}" onchange="setTimeFilter(this.value)">
                                    <option value="all">All Times</option>
                                    <option value="morning">Morning</option>
                                    <option value="afternoon">Afternoon</option>
                                    <option value="evening">Evening</option>
                                </select>
                                <select class="filter-select" value="${locationFilter}" onchange="setLocationFilter(this.value)">
                                    <option value="all">All Venues</option>
                                    ${allVenues.map(venue => `
                                        <option value="${venue}">${venue}</option>
                                    `).join('')}
                                </select>
                                <select class="filter-select" value="${keywordFilter}" onchange="setKeywordFilter(this.value)">
                                    <option value="all">All Topics</option>
                                    ${allKeywords.slice(0, 50).map(keyword => `
                                        <option value="${keyword}">${keyword}</option>
                                    `).join('')}
                                </select>
                            </div>
                            <div class="search-container">
                                <input 
                                    type="text" 
                                    placeholder="Search sessions..." 
                                    value="${searchQuery}"
                                    class="search-input"
                                    oninput="setSearchQuery(this.value)"
                                />
                                <button class="clear-btn ${searchQuery ? 'visible' : ''}" onclick="clearSearch()">√ó</button>
                            </div>
                            <button class="theme-toggle" onclick="toggleTheme()" title="Toggle theme">
                                ${theme === 'light' ? 'üåô' : '‚òÄÔ∏è'}
                            </button>
                        </div>
                    </header>

                    <main class="schedule-content">
                        ${slotGroups.length === 0 ? `
                            <div class="empty-state">
                                <p>No sessions match your filters.</p>
                            </div>
                        ` : slotGroups.map(([slot, slotSessions]) => `
                            <section class="time-slot">
                                <h2 class="slot-time">${slot}</h2>
                                <div class="session-grid">
                                    ${slotSessions.map(session => `
                                        <article class="session-card ${bookmarkedIds.has(session.id) ? 'bookmarked' : ''}" onclick="showSessionModal(${session.id})">
                                            <button 
                                                class="bookmark-btn ${bookmarkedIds.has(session.id) ? 'bookmarked' : ''}"
                                                onclick="event.stopPropagation(); toggleBookmark(${session.id})"
                                                title="${bookmarkedIds.has(session.id) ? 'Remove bookmark' : 'Bookmark session'}"
                                            >
                                                ${bookmarkedIds.has(session.id) ? '‚òÖ' : '‚òÜ'}
                                            </button>
                                            <h3 class="session-title">${session.title}</h3>
                                            <div class="session-location">üìç ${session.location}</div>
                                            ${session.speakers.length > 0 ? `
                                                <div class="session-speakers">
                                                    <strong>Speakers:</strong> ${session.speakers.slice(0, 2).join(', ')}${session.speakers.length > 2 ? ` +${session.speakers.length - 2} more` : ''}
                                                </div>
                                            ` : ''}
                                            ${session.keywords && session.keywords.length > 0 ? `
                                                <div class="session-keywords">
                                                    ${session.keywords.slice(0, 4).map(keyword => `
                                                        <span class="keyword-tag">${keyword}</span>
                                                    `).join('')}
                                                </div>
                                            ` : ''}
                                        </article>
                                    `).join('')}
                                </div>
                            </section>
                        `).join('')}
                    </main>
                </div>
            `;
        }

        // Parse speaker name and affiliation
        function parseSpeaker(speakerString) {
            const parts = speakerString.split(',').map(s => s.trim());
            if (parts.length >= 2) {
                return {
                    name: parts[0],
                    affiliation: parts.slice(1).join(', ')
                };
            }
            return {
                name: speakerString,
                affiliation: ''
            };
        }

        // Show session modal
        function showSessionModal(sessionId) {
            const session = sessions.find(s => s.id === sessionId);
            if (!session) return;

            const modalHtml = `
                <div class="modal-overlay visible" onclick="closeModal(event)">
                    <div class="modal-content" onclick="event.stopPropagation()">
                        <div class="modal-header">
                            <h2 class="modal-title">${session.title}</h2>
                            <button class="modal-close" onclick="closeModal()" title="Close">√ó</button>
                        </div>
                        <div class="modal-body">
                            <div class="modal-section">
                                <div class="modal-section-title">Time</div>
                                <div class="modal-time">üïê ${session.time}</div>
                            </div>

                            <div class="modal-section">
                                <div class="modal-section-title">Location</div>
                                <div class="modal-location">üìç ${session.location}</div>
                            </div>

                            ${session.speakers && session.speakers.length > 0 ? `
                                <div class="modal-section">
                                    <div class="modal-section-title">Speakers (${session.speakers.length})</div>
                                    <ul class="speaker-list">
                                        ${session.speakers.map(speaker => {
                const { name, affiliation } = parseSpeaker(speaker);
                return `
                                                <li class="speaker-item">
                                                    <div class="speaker-name">${name}</div>
                                                    ${affiliation ? `<div class="speaker-affiliation">${affiliation}</div>` : ''}
                                                </li>
                                            `;
            }).join('')}
                                    </ul>
                                </div>
                            ` : ''}

                            ${session.description && session.description.trim() ? `
                                <div class="modal-section">
                                    <div class="modal-section-title">Description</div>
                                    <p class="modal-description">${session.description}</p>
                                </div>
                            ` : ''}

                            ${session.knowledge_partners && session.knowledge_partners.trim() ? `
                                <div class="modal-section">
                                    <div class="modal-section-title">Knowledge Partners</div>
                                    <div class="knowledge-partners">${session.knowledge_partners}</div>
                                </div>
                            ` : ''}
                        </div>
                    </div>
                </div>
            `;

            const modalContainer = document.getElementById('modal-container') || (() => {
                const container = document.createElement('div');
                container.id = 'modal-container';
                document.body.appendChild(container);
                return container;
            })();

            modalContainer.innerHTML = modalHtml;
            document.body.style.overflow = 'hidden';
        }

        // Close modal
        function closeModal(event) {
            if (event && event.target.classList.contains('modal-content')) return;
            const modalContainer = document.getElementById('modal-container');
            if (modalContainer) {
                modalContainer.innerHTML = '';
            }
            document.body.style.overflow = '';
        }

        // Event handlers
        function setActiveDay(day) {
            activeDay = day;
            render();
        }

        function setSearchQuery(query) {
            searchQuery = query;
            render();
        }

        function clearSearch() {
            searchQuery = '';
            render();
        }

        function setTimeFilter(filter) {
            timeFilter = filter;
            render();
        }

        function setLocationFilter(filter) {
            locationFilter = filter;
            render();
        }

        function setKeywordFilter(filter) {
            keywordFilter = filter;
            render();
        }

        // Initialize
        async function init() {
            loadTheme();
            loadBookmarks();

            try {
                const response = await fetch('./data/sessions.json');
                const data = await response.json();
                sessions = parseSessions(data);
                render();
            } catch (error) {
                document.getElementById('app').innerHTML = `
                    <div class="loading">
                        <h1>Error loading sessions</h1>
                        <p>${error.message}</p>
                    </div>
                `;
            }
        }

        init();
    </script>
</body>

</html>